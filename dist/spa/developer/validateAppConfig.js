const throwError=o=>{const e=`Failed to validate app config: ${o}`,r=new Error(e);throw r.stack=r.stack.trim().split("\n")[0],r},windowsReservedProtocols=["application.manifest","application.reference","batfile","blob","cerfile","chm.file","cmdfile","comfile","cplfile","dllfile","drvfile","exefile","explorer.assocactionid.burnselection","explorer.assocactionid.closesession","explorer.assocactionid.erasedisc","explorer.assocactionid.zipselection","explorer.assocprotocol.search-ms","explorer.burnselection","explorer.closesession","explorer.erasedisc","explorer.zipselection","file","fonfile","hlpfile","htafile","inffile","insfile","internetshortcut","jsefile","lnkfile","microsoft.powershellscript .1","ms-accountpictureprovider","ms-appdata","ms-appx","ms-autoplay","msi.package","msi.patch","ms-windows-store","ocxfile","piffile","regfile","scrfile","scriptletfile","shbfile","shcmdfile","shsfile","smb","sysfile","ttffile","unknown","usertileprovider","vbefile","vbsfile","windows.gadget","wsffile","wsfile","wshfile"];module.exports=function(o){o&&"object"===typeof o||throwError("config is not an object");for(const e of["name","displayName","author","developer","description","publisher","homepage","upgradeCode","protocol","shortProtocol"])e in o&&"string"===typeof o[e]||throwError(`config.${e} must be string`);o.name.match(/^[a-zA-Z0-9.\-+]{3,}/)||throwError("config.name should contain at least 3 characters"),o.protocol.match(/^[a-z][a-z0-9.\-+]{2,}/)||throwError("config.protocol should contain at least 3 characters, start with lower-case letter(a-z) and not include upper-case letters"),windowsReservedProtocols.includes(o.protocol)&&throwError(`The protocol "${o.protocol}" is not available since it is reserved by Windows Store`),o.shortProtocol.match(/^[a-z][a-z0-9.\-+]{1,}/)||throwError("config.shortProtocol should contain at least 2 characters, start with lower-case letter(a-z) and not include upper-case letters"),windowsReservedProtocols.includes(o.shortProtocol)&&throwError(`The protocol "${o.shortProtocol}" is not available since it is reserved by Windows Store`),o.name.toLowerCase()===o.shortProtocol&&throwError("config.shortProtocol should not be same as config.name"),o.protocol===o.shortProtocol&&throwError("config.shortProtocol should not be same as config.protocol"),o.protocol===o.shortProtocol&&throwError("config.shortProtocol should not be same as app name"),o.register&&"object"===typeof o.register||throwError("config.register should be object"),"whitelist"===o.register.mode&&(Array.isArray(o.register.list)&&0!==o.register.list.length||throwError('config.register.list should be array with at least one country code since register mode is "whitelist"'))};