(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0501":function(t,e,n){},"084c":function(t,e,n){},"0d11":function(t,e,n){},"10f3":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.electronOnly||t.isElectron,expression:"electronOnly ? isElectron : true"}],staticClass:"setting-block row q-pt-sm q-pb-md"},[n("div",{staticClass:"setting-label col-xs-12 col-sm-4 q-pt-sm"},[n("span",{staticClass:"q-mr-md"},[t._v(t._s(t.label))])]),n("div",{staticClass:"setting-content col row"},[t._t("default")],2)])},i=[],a=n("d310"),o={props:{label:String,electronOnly:Boolean},data(){return{isElectron:Object(a["isElectron"])()}}},l=o,r=(n("8a02"),n("2b5f")),c=Object(r["a"])(l,s,i,!1,null,"00cd607c",null);e["a"]=c.exports},"154e":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-container"},[n("q-page",{staticClass:"advance-settings",class:{changed:t.changed,large:t.isElectron},staticStyle:{"min-height":"unset"},attrs:{padding:""}},[n("SettingBlock",{directives:[{name:"show",rawName:"v-show",value:t.showDevOption,expression:"showDevOption"}],attrs:{label:"DevTools"}},[n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.devTools,!1))],1),n("SettingBlock",{attrs:{label:t.t("autoUpdate"),electronOnly:""}},[n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.autoUpdate,!1)),n("small",{staticClass:"col-12"},[t._v(t._s(t.t("last_check_at"))+": "+t._s(t.lastUpdateCheckTime))])],1),n("SettingBlock",{attrs:{label:t.t("update_channel"),electronOnly:""}},[n("SettingSelect",{attrs:{options:t.chanelOptions},model:{value:t.versionChannel,callback:function(e){t.versionChannel=e},expression:"versionChannel"}}),n("SettingText",t._b({directives:[{name:"show",rawName:"v-show",value:"internal"===t.versionChannel,expression:"versionChannel === 'internal'"}],on:{change:t.storeChange}},"SettingText",t.patConfig,!1))],1),n("SettingBlock",{attrs:{label:t.t("trackerService"),electronOnly:""}},[n("SettingMultiSelect",{attrs:{keyName:"trackerSource",value:t.settings.trackerSource,options:t.trackerOptions},on:{change:t.storeChange}}),n("SettingTextarea",{attrs:{keyName:"trackerList",value:t.settings.trackerList,label:"Trackers"},on:{change:t.storeChange}}),n("div",{staticClass:"col-12 tracker-links text-page q-mt-sm"},[n("span",[t._v(t._s(t.t("recommendUse"))+":")]),n("a",{attrs:{href:"https://github.com/ngosang/trackerslist",target:"_blank"}},[t._v("ngosang/trackerslist")]),n("a",{attrs:{href:"https://github.com/XIU2/TrackersListCollection",target:"_blank"}},[t._v("XIU2/TrackersListCollection")])]),n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.autoUpdateTrackers,!1)),n("alphabiz-button",{staticClass:"q-mt-sm",attrs:{color:"primary",label:t.t("manualUpdateTracker")},on:{click:t.updateTrackers}}),n("small",{staticClass:"col-12 q-mt-sm"},[t._v(t._s(t.t("last_check_at"))+": "+t._s(t.lastUpdateTrackerTime))])],1),n("SettingBlock",{attrs:{label:t.t("listenPort"),electronOnly:""}},[n("SettingNumber",t._b({on:{change:t.storeChange}},"SettingNumber",t.ports.BTListenPort,!1)),n("SettingNumber",t._b({on:{change:t.storeChange}},"SettingNumber",t.ports.DHTListenPort,!1))],1),n("SettingBlock",{attrs:{label:t.t("encrypt_connection")}},[n("SettingSelect",{attrs:{options:t.secureOptions},model:{value:t.secureOption,callback:function(e){t.secureOption=e},expression:"secureOption"}})],1),t.isMas?t._e():n("SettingBlock",{attrs:{label:t.t("protocols"),electronOnly:""}},[n("div",{staticClass:"col-12 q-mt-sm"},[t._v(t._s(t.t("setDefaultClientForFollowingProtocols")))]),n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.magnetUrl,!1))],1),t.isWindows?n("SettingBlock",{attrs:{label:t.t("torrent_file"),electronOnly:""}},[n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.torrentFile,!1))],1):t._e(),t.isWindows?n("SettingBlock",{attrs:{label:t.t("video_file"),electronOnly:""}},[n("div",{staticClass:"col-6 row",attrs:{id:"bind-ports"}},t._l(t.fileExt.video,(function(e){return n("SettingCheckbox",t._b({key:e.label,on:{change:function(e,n){return t.storeExtChange("video",e,n)}}},"SettingCheckbox",e,!1))})),1)]):t._e(),t.isWindows?n("SettingBlock",{attrs:{label:t.t("audio_file"),electronOnly:""}},[n("div",{staticClass:"col-6 row"},t._l(t.fileExt.audio,(function(e){return n("SettingCheckbox",t._b({key:e.label,on:{change:function(e,n){return t.storeExtChange("audio",e,n)}}},"SettingCheckbox",e,!1))})),1)]):t._e(),n("SettingBlock",{attrs:{label:t.t("library_recommend")}},[n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.showAllChannels,!1))],1),n("SettingBlock",{attrs:{id:"custom-nodes",label:t.$t("custom_nodes")}},[n("SettingTextarea",{attrs:{keyName:"gunPeers",value:t.gunPeers},on:{change:t.setGunPeers}}),n("a",{staticClass:"open-link",attrs:{href:"https://alpha.biz/blog/how-to-deploy-a-gun-server/",target:"_blank"}},[n("span",{staticClass:"open-link-text"},[t._v(t._s(t.$t("learn_how_to_deploy_gun")))]),n("q-icon",{staticClass:"q-ml-xs",attrs:{name:"open_in_new"}})],1)],1),n("SettingBlock",{attrs:{label:t.$t("library_preload"),electronOly:""}},[n("SettingCheckbox",t._b({on:{change:t.storeChange}},"SettingCheckbox",t.checkboxes.libraryPreload,!1))],1)],1),n("SettingFooter",{attrs:{disable:!t.changed,loading:t.loading},on:{submit:t.submit,discard:t.onDiscard,reset:t.onReset}})],1)},i=[],a=n("93ec"),o=n("b6d0"),l=n("5584"),r=n("1926");const c="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best.txt",u="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_best_ip.txt",h="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all.txt",d="https://raw.githubusercontent.com/ngosang/trackerslist/master/trackers_all_ip.txt",g="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best.txt",b="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_best_ip.txt",p="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all.txt",m="https://cdn.jsdelivr.net/gh/ngosang/trackerslist/trackers_all_ip.txt",v="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/best.txt",f="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/all.txt",k="https://raw.githubusercontent.com/XIU2/TrackersListCollection/master/http.txt",_="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/best.txt",C="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/all.txt",y="https://cdn.jsdelivr.net/gh/XIU2/TrackersListCollection/http.txt",x=[{label:"ngosang/trackerslist",options:[{value:c,label:"ngosang_best",cdn:!1},{value:u,label:"ngosang_best_ip",cdn:!1},{value:h,label:"ngosang_all",cdn:!1},{value:d,label:"ngosang_all_ip",cdn:!1},{value:g,label:"ngosang_best",cdn:!0},{value:b,label:"ngosang_best_ip",cdn:!0},{value:p,label:"ngosang_all",cdn:!0},{value:m,label:"ngosang_all_ip",cdn:!0}]},{label:"XIU2/TrackersListCollection",options:[{value:v,label:"xiu2_best",cdn:!1},{value:f,label:"xiu2_all",cdn:!1},{value:k,label:"xiu2_http",cdn:!1},{value:_,label:"xiu2_best",cdn:!0},{value:C,label:"xiu2_all",cdn:!0},{value:y,label:"xiu2_http",cdn:!0}]}];var S=n("908d"),w=(n("de6c"),n("d310"));let O={on:()=>{},send:()=>{}};O=n("1b85").ipcRenderer;const T={};O.on("send_result",((t,{eventName:e,data:n})=>{T[e][0](n)})),O.on("send_error",((t,{eventName:e,data:n})=>{T[e][1](n)})),O.on("about-dialog",(()=>{w["Bus"].$emit("CALL_ABOUT")}));var q=(t,...e)=>new Promise(((n,s)=>{e.length?O.send(t,...e):O.send(t),T[t]=[n,s]})),N=n("c62a6"),$=n("8097"),P=n("10f3"),U=n("edc32"),L=n("9d67"),B=n("4584"),E=n("f0e6"),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 row"},[n("q-input",{staticClass:"setting-text-input q-mt-sm",attrs:{hint:t.label,type:"text",dense:"",outlined:""},nativeOn:{paste:function(t){t.stopPropagation()}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)},j=[],A={props:{value:String,keyName:String,label:String},computed:{text:{get(){return this.value},set(t){this.onChange(t)}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},I=A,Q=(n("9f81"),n("2b5f")),M=n("0e45"),F=n("09a4"),V=n.n(F),R=Object(Q["a"])(I,D,j,!1,null,"188fdf7a",null),H=R.exports;V()(R,"components",{QInput:M["a"]});var X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 row q-mt-sm"},[n("div",{staticClass:"col-12 q-ml-sm"},[t._v(t._s(t.label))]),n("q-input",{staticClass:"setting-textarea-input",attrs:{outlined:"",type:"textarea",rows:"5"},nativeOn:{paste:function(t){t.stopPropagation()}},model:{value:t.texts,callback:function(e){t.texts=e},expression:"texts"}})],1)},z=[],W={props:{value:Array,label:String,keyName:String},computed:{texts:{get(){return this.value.join("\n")},set(t){this.onChange(t.split("\n"))}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},J=W,G=(n("2449"),n("8b91"),n("b121")),K=Object(Q["a"])(J,X,z,!1,null,"2ab947b8",null),Y=K.exports;V()(K,"components",{QInput:M["a"],QField:G["a"]});var Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 q-mt-sm"},[n("q-select",{staticClass:"select-multi-input q-px-none",attrs:{outlined:"",dense:"",multiple:"","use-chips":"","use-input":"",value:t.selected,options:t.options},on:{input:t.onChange},nativeOn:{paste:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"selected-item",fn:function(e){return[n("q-chip",{staticClass:"q-py-md q-px-md",attrs:{removable:"",dense:"",tabindex:e.tabindex,color:"general","text-color":"general"},on:{remove:function(t){return e.removeAtIndex(e.index)}}},[t._v("\n        "+t._s(e.opt.label)+"\n      ")])]}}])})],1)},tt=[],et={props:{value:Array,options:Array,keyName:String},computed:{selected:{get(){return this.value},set(t){this.onChange(t)}}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},nt=et,st=(n("3901"),n("a4ac")),it=n("da23"),at=Object(Q["a"])(nt,Z,tt,!1,null,null,null),ot=at.exports;V()(at,"components",{QSelect:st["a"],QChip:it["a"],QField:G["a"]});var lt=function(t,e,n,s){var i,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},rt=function(t,e,n,s){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{r(s.next(t))}catch(e){a(e)}}function l(t){try{r(s["throw"](t))}catch(e){a(e)}}function r(t){t.done?n(t.value):i(t.value).then(o,l)}r((s=s.apply(t,e||[])).next())}))};const ct=!!S["b"].is.electron,ut=x.reduce(((t,e)=>{const n=e.options;return t.push(...n),t}),[]);let ht=class extends o["a"]{constructor(){super(...arguments),this.trackerOptions=ut,this.isWindows=!!S["b"].is.win,this.isElectron=ct,this.chanelOptions=[{label:"stable",value:"stable"},{label:"nightly",value:"nightly"},{label:"internal",value:"internal"}],this.secureOptions=[{label:this.t("auto"),value:"auto"},{label:this.t("enable"),value:"enable"},{label:this.t("disable"),value:"disable"}],this.gunPeers=JSON.parse(localStorage.getItem("gun-custom-peers")||"[]")||[]}mounted(){this.$route.fullPath.includes("highlight")&&setTimeout((()=>{const t=this.$route.query.highlight;if(!t||"string"!==typeof t)return;const e=document.getElementById(t);console.log("high light target",t,e),e&&(console.log(e.scrollIntoView),e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("highlight"),setTimeout((()=>{e.classList.remove("highlight")}),2500))}),500)}get isMas(){return S["b"].is.mac&&Object($["a"])()}get showDevOption(){return!l["a"].getters.settings.disableDevTools}onDevOptionsChange(t){this.settings.disableDevTools=!t}get lastUpdateCheckTime(){return new Date(l["a"].getters.settings.lastUpdateCheckTime).toLocaleString(r["b"].locale)}get lastUpdateTrackerTime(){return"string"===typeof l["a"].getters.settings.trackerLastUpdateTime?l["a"].getters.settings.trackerLastUpdateTime:new Date(l["a"].getters.settings.trackerLastUpdateTime).toLocaleString(r["b"].locale||"en_US")}get versionChannel(){return this.settings.versionChannel}set versionChannel(t){this.storeChange("versionChannel",t)}get patConfig(){return{label:"Github PAT (internal)",value:this.settings.githubPAT,keyName:"githubPAT"}}get secureOption(){return this.settings.secureOption}set secureOption(t){this.storeChange("secureOption",t)}get checkboxes(){return{devTools:{label:this.t("disable"),value:this.settings.disableDevTools,keyName:"disableDevTools"},autoUpdate:{label:this.t("autoCheckUpdate"),value:this.settings.autoCheckUpdate,keyName:"autoCheckUpdate"},autoUpdateTrackers:{label:this.t("autoUpdateTrackerServiceList"),value:this.settings.autoUpdateTrackerServiceList,keyName:"autoUpdateTrackerServiceList"},magnetUrl:{label:this.t("magnetUrl")+" [ magnet: ]",value:this.settings.bindMagnetUrl,keyName:"bindMagnetUrl"},torrentFile:{label:".torrent",value:this.settings.bindTorrentFile,keyName:"bindTorrentFile"},videoFile:{label:this.t("video_file"),value:this.settings.bindVideoFile,keyName:"bindVideoFile"},audioFile:{label:this.t("audio_file"),value:this.settings.bindAudioFile,keyName:"bindAudioFile"},showAllChannels:{label:this.t("show_all_channels"),value:this.settings.libraryShowAllChannels,keyName:"libraryShowAllChannels"},libraryPreload:{label:this.$t("enable"),value:this.settings.libraryPreload,keyName:"libraryPreload"}}}get fileExt(){const t=["mp4","mkv","avi","mov","wmv","rmvb","flv","webm"],e=["mp3","wav","aac","flac","m4a","wma"];return{video:t.map((t=>(this.settings.bindVideoExts[t]||this.$set(this.settings.bindVideoExts,t,!1),{label:"."+t,value:this.settings.bindVideoExts[t],keyName:t,dense:!0}))),audio:e.map((t=>(this.settings.bindAudioExts[t]||this.$set(this.settings.bindAudioExts,t,!1),{label:"."+t,value:this.settings.bindAudioExts[t],keyName:t,dense:!0})))}}storeExtChange(t,e,n){const s="video"===t?this.settings.bindVideoExts:this.settings.bindAudioExts;s[e]=n,this.storeChange("video"===t?"bindVideoExts":"bindAudioExts",s)}get ports(){const t=t=>!(isNaN(t)||t<17e3||t>22e3)||this.t("range_error",[17e3,22e3]);return{BTListenPort:{label:this.t("BTlistenPort"),value:this.settings.BTlistenPort,keyName:"BTlistenPort",rules:[t],dice:[17e3,22e3]},DHTListenPort:{label:this.t("DHTlistenPort"),value:this.settings.DHTlistenPort,keyName:"DHTlistenPort",rules:[t],dice:[17e3,22e3]}}}updateTrackers(){return rt(this,void 0,void 0,(function*(){const t=yield q("update_tracker",this.settings.trackerSource);if(t&&t.data){const e=t.data;e.length?(this.storeChange("trackerList",e),t.time&&this.storeChange("trackerLastUpdateTime",t.time),this.notify(this.t("manualUpdateSuccess"))):this.notify(this.t("update_failed"))}}))}setGunPeers(t,e){return this.gunPeers=e,this.storeChange(t,e)}beforeRouteEnter(t,e,n){if(t.hash){const e=t.hash;n((()=>{setTimeout((()=>{const t=document.querySelector(e);t?t.scrollIntoView():console.log(e)}),100)}))}else n(!0)}submit(){return rt(this,void 0,void 0,(function*(){if(this.changes.has("gunPeers")){const t=()=>rt(this,void 0,void 0,(function*(){const t=this.changes.get("gunPeers");if(t){const e=t.filter((t=>t)).map((t=>{const e=t.trim();return e.startsWith("http")?e:e.match(/^\s+:\/\//)?e.replace(/^\s\/\//,"https://"):"https://"+e}));localStorage.setItem("gun-custom-peers",JSON.stringify(e)),this.gunPeers=e}this.changes.delete("gunPeers"),yield this.submit()})),e=t=>rt(this,void 0,void 0,(function*(){let e=null;const n=t=>this.$t("wait_for_reboot",{seconds:Math.round(t)}),s=yield new Promise((s=>{const i=t=>{e&&(clearInterval(e),e=null,a(),s(t))},a=this.$q.notify({group:!1,progress:!0,timeout:0,message:n(t),icon:"error",position:"bottom-right",actions:[{label:this.$t("cancel"),handler:()=>i(!1)}]});e=setInterval((()=>{if(t-=1,t<=0)return i(!0);a({message:n(t)})}),1e3)})),i=()=>rt(this,void 0,void 0,(function*(){yield this.$router.push({name:"Index"}),location.reload()}));s&&(yield i())}));yield this.$alphabiz.dialog({title:this.t("edit_cache_node"),message:this.t("custom_nodes_hint"),ok:{label:this.t("reboot_now"),handler:n=>rt(this,void 0,void 0,(function*(){yield t(),e(10),n.hide()}))},cancel:{label:this.t("reboot_later"),handler:e=>rt(this,void 0,void 0,(function*(){yield t(),e.hide()}))}}).promise()}else yield this.onSubmit(),this.changes.get("versionChannel")&&ct&&setTimeout((()=>{N["a"].$emit("updater$recheckUpdate")}),1e3)}))}};lt([Object(a["b"])("showDevOption")],ht.prototype,"onDevOptionsChange",null),ht=lt([Object(a["a"])({components:{SettingBlock:P["a"],SettingCheckbox:L["a"],SettingSelect:B["a"],SettingNumber:E["a"],SettingText:H,SettingTextarea:Y,SettingMultiSelect:ot,SettingFooter:U["a"]}})],ht);var dt=ht,gt=dt,bt=(n("a34b"),n("9b72")),pt=n("f106"),mt=n("4101"),vt=Object(Q["a"])(gt,s,i,!1,null,"5cfbe7d8",null);e["default"]=vt.exports;V()(vt,"components",{QPage:bt["a"],QIcon:pt["a"],QColor:mt["a"]})},"1b02":function(t,e,n){"use strict";var s;n.d(e,"a",(function(){return s})),function(t){t["system"]="system",t["light"]="light",t["dark"]="dark"}(s||(s={}))},"1b14":function(t,e,n){},2449:function(t,e,n){"use strict";n("0d11")},2984:function(t,e,n){},3901:function(t,e,n){"use strict";n("fcc7")},"427d":function(t,e,n){"use strict";n("634e")},4584:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-select",{staticClass:"setting-select",class:{caption:t.caption},attrs:{value:t.displayLabel,options:t.options,label:t.label,outlined:"",dense:"","emit-value":"","data-cy":"select-direct"},on:{input:t.emitChange},scopedSlots:t._u([t.caption?{key:"option",fn:function(e){return[n("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",[n("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),e.opt.caption?n("q-tooltip",t._l(e.opt.caption.split("\n"),(function(e,s){return n("span",{key:s,staticClass:"tooltip"},[t._v(t._s(e))])})),0):t._e()],1)],1)]}}:null],null,!0)})},i=[],a=(n("de6c"),{model:{prop:"value",event:"change"},props:{value:String,options:Array,label:String,caption:Boolean},computed:{displayLabel(){for(const t of this.options)if(t.value===this.value)return t.label;return this.value}},methods:{emitChange(t){this.$emit("change",t)}}}),o=a,l=(n("8dcf"),n("2b5f")),r=n("a4ac"),c=n("b329"),u=n("25fb"),h=n("79e0"),d=n("cf25"),g=n("09a4"),b=n.n(g),p=Object(l["a"])(o,s,i,!1,null,"58d8362a",null);e["a"]=p.exports;b()(p,"components",{QSelect:r["a"],QItem:c["a"],QItemSection:u["a"],QItemLabel:h["a"],QTooltip:d["a"]})},6065:function(t,e,n){"use strict";n("fef1")},"634e":function(t,e,n){},"6dc2":function(t,e,n){},"8a02":function(t,e,n){"use strict";n("6dc2")},"8b91":function(t,e,n){"use strict";n("0501")},"8dcf":function(t,e,n){"use strict";n("1b14")},"9d67":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.dense?"col-4":"col-12"},[n("q-checkbox",{staticClass:"q-mt-sm",attrs:{value:t.value,label:t.label,dense:""},on:{input:t.onChange}},[t.tooltip?n("q-tooltip",[t._v(t._s(t.tooltip))]):t._e()],1)],1)},i=[],a={props:{value:{required:!0},label:String,keyName:String,dense:Boolean,tooltip:{type:String,required:!1}},methods:{onChange(t){this.$emit("change",this.keyName,t)}}},o=a,l=n("2b5f"),r=n("7498"),c=n("cf25"),u=n("09a4"),h=n.n(u),d=Object(l["a"])(o,s,i,!1,null,null,null);e["a"]=d.exports;h()(d,"components",{QCheckbox:r["a"],QTooltip:c["a"]})},"9f81":function(t,e,n){"use strict";n("084c")},a34b:function(t,e,n){"use strict";n("2984")},b6d0:function(t,e,n){"use strict";var s=n("93ec"),i=n("ff9b"),a=n("5584"),o=n("07e8"),l=n("908d"),r=n("f680"),c=n("8750"),u=n("1926"),h=n("d7df"),d=n("d310"),g=n("3387"),b=n("d884"),p=n("1b02"),m=function(t,e,n,s){var i,a=arguments.length,o=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},v=function(t,e,n,s){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,a){function o(t){try{r(s.next(t))}catch(e){a(e)}}function l(t){try{r(s["throw"](t))}catch(e){a(e)}}function r(t){t.done?n(t.value):i(t.value).then(o,l)}r((s=s.apply(t,e||[])).next())}))};const f=!!l["b"].is.electron;let k;f&&(k=n("1b85").ipcRenderer);const _={data(){return{removeOnAuthStateChangedListener:null}},created(){console.log("SignOutHandlerMixinSignOutHandlerMixin"),this.removeOnAuthStateChangedListener=this.$amplify.addOnAuthStateChangedListener((t=>{"signedOut"===t&&this.onDiscard()}))},beforeDestroy(){this.removeOnAuthStateChangedListener&&this.removeOnAuthStateChangedListener()}};let C=class extends i["a"]{constructor(){super(...arguments),this.loading=!1,this.changes=new Map,this.settings={},this.languages=b["b"],this.changed=!1,this.onSignOutHandler=()=>{}}get language(){return this.settings.language}set language(t){u["b"].locale=t,f&&k.send("change-app-i18n",t),this.storeChange("language",t)}get darkMode(){return this.settings.darkMode}set darkMode(t){o["a"].set(t===p["a"].system?"auto":t===p["a"].dark),this.storeChange("darkMode",t)}t(t,...e){return u["b"].t(t,...e)}requestSaveBeforeSignout(){return v(this,void 0,void 0,(function*(){this.changes.size?c["a"].create({title:this.t("change_not_save"),message:this.t("account_request_save_settings"),ok:{textColor:"primary",color:"primary",flat:!0,label:this.t("submit")},cancel:{textColor:"unset",color:"unset",flat:!0,label:this.t("account_cancel")}}).onOk((()=>{this.onSubmit().then((()=>{d["Bus"].$emit("settings-saved",!0)}))})).onCancel((()=>{d["Bus"].$emit("settings-saved",!1)})):d["Bus"].$emit("settings-saved",!0)}))}resetChange(){this.changes.clear(),this.changed=!1,this.loading=!1}storeChange(t,e){console.tag("Setting",t).log(e),this.changes.set(t,e),this.$set(this.settings,t,e),this.changed=!0}notify(t){r["a"].create({message:t,position:"bottom-right",type:"positive",timeout:2e3})}syncSetting(){return v(this,void 0,void 0,(function*(){const t=yield a["a"].dispatch("fetchSettings"),e=this.language;this.settings=Object(g["cloneDeep"])(t);const n=t.darkMode===p["a"].system;return o["a"].set(n?"auto":t.darkMode===p["a"].dark),e!==t.language&&(this.language=t.language),t}))}onSubmit(){return v(this,void 0,void 0,(function*(){if(!this.changes.size)return this.resetChange();this.loading=!0;const t=Object.fromEntries(this.changes);t.maximumDownloadNum&&h["a"].emit("update_torrent_settings",{maximumDownloadNum:t.maximumDownloadNum}),yield a["a"].dispatch("set",t),yield this.syncSetting(),this.resetChange(),this.notify(this.t("preferences_set_successfully"))}))}onDiscard(){return v(this,void 0,void 0,(function*(){this.changed&&(yield this.syncSetting(),this.resetChange())}))}onReset(){return v(this,void 0,void 0,(function*(){c["a"].create({title:this.t("reset"),message:this.t("reset_all_settings"),ok:{textColor:"red",color:"unset",flat:!0,label:this.t("reset")},cancel:{textColor:"unset",color:"unset",flat:!0,label:this.t("not_now")}}).onOk((()=>v(this,void 0,void 0,(function*(){this.loading=!0,yield a["a"].dispatch("resetSettings"),yield this.syncSetting(),this.resetChange(),this.notify(this.t("preferences_resetted"))}))))}))}created(){this.settings=Object(g["cloneDeep"])(a["a"].getters.settings),this.onSignOutHandler=this.requestSaveBeforeSignout.bind(this),d["Bus"].$on("request-save-settings",this.onSignOutHandler)}beforeDestroy(){return d["Bus"].$off("request-save-settings",this.onSignOutHandler),this.onDiscard()}beforeRouteLeave(t,e,n){if(!this.changed)return n();c["a"].create({title:this.t("change_not_save"),message:this.t("discard_all_changes"),ok:this.t("stay_in_page"),cancel:this.t("discard"),persistent:!0}).onOk((()=>n(!1))).onCancel((()=>n()))}};C=m([Object(s["a"])({mixins:[_]})],C),e["a"]=C},edc32:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-footer",{attrs:{bordered:""}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disable,expression:"!disable"}],staticClass:"row q-pa-sm setting-footer"},[n("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",loading:t.loading,"text-color":"primary",color:"primary",label:t.$t("submit")},on:{click:t.submit}}),n("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",loading:t.loading,"text-color":"general",color:"general",label:t.$t("discard")},on:{click:t.discard}}),n("q-space"),n("q-btn",{staticClass:"q-mx-xs",attrs:{unelevated:"",loading:t.loading,"text-color":"negative",color:"negative",label:t.$t("reset")},on:{click:t.reset}})],1)])},i=[],a={props:{disable:Boolean,loading:Boolean},methods:{submit(){this.$emit("submit")},discard(){this.$emit("discard")},reset(){this.$emit("reset")}}},o=a,l=(n("427d"),n("2b5f")),r=n("0daf"),c=n("1043"),u=n("990e"),h=n("09a4"),d=n.n(h),g=Object(l["a"])(o,s,i,!1,null,"faac6c86",null);e["a"]=g.exports;d()(g,"components",{QFooter:r["a"],QBtn:c["a"],QSpace:u["a"]})},f0e6:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 row"},[n("q-input",{staticClass:"q-mt-sm setting-number-input",attrs:{type:"number",dense:"",outlined:"",hint:t.label,rules:t.rules},on:{blur:t.onBlur},nativeOn:{paste:function(t){t.stopPropagation()}},scopedSlots:t._u([t.dice?{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"casino"},on:{click:t.setRandom}},[n("q-tooltip",[t._v(t._s(t.$t("random")))])],1)]},proxy:!0}:null],null,!0),model:{value:t.number,callback:function(e){t.number=t._n(e)},expression:"number"}})],1)},i=[],a=(n("de6c"),{props:{value:Number,keyName:String,label:String,dice:{type:Array,required:!1},rules:{type:Array,default:()=>[]},min:{type:Number,default:1}},computed:{number:{get(){return this.value},set(t){this.onChange(t)}},minValue(){return Array.isArray(this.dice)?this.dice[0]:this.min}},methods:{isValid(t){for(const e of this.rules)if("function"===typeof e){const n=e(t);if(!0!==n)return!1}return!0},onChange(t){if(""===t)return this.$emit("change",this.keyName,this.minValue);this.$emit("change",this.keyName,t)},onBlur(){this.isValid(this.value)||this.$emit("change",this.keyName,this.minValue)},setRandom(){if(!this.dice||!this.dice.length)return;const[t,e]=this.dice;return this.onChange(Math.floor(Math.random()*(e-t)+t))}}}),o=a,l=(n("6065"),n("2b5f")),r=n("0e45"),c=n("f106"),u=n("cf25"),h=n("09a4"),d=n.n(h),g=Object(l["a"])(o,s,i,!1,null,"67993ab0",null);e["a"]=g.exports;d()(g,"components",{QInput:r["a"],QIcon:c["a"],QTooltip:u["a"]})},fcc7:function(t,e,n){},fef1:function(t,e,n){}}]);